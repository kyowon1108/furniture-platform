# 카메라 줌 개선 완료

## 🎯 문제 상황

### 사용자 불편사항
- 최대 확대를 해도 방 밖에서만 가구 배치 가능
- 방 안으로 들어가서 세밀하게 배치할 수 없음
- 가구 배치 시 정확한 위치 조정 어려움
- 실내 디자인 작업에 제약

### 기술적 원인
```typescript
// 수정 전
<OrbitControls
  minDistance={5}  // 최소 거리 5 유닛 (너무 멀음!)
  maxDistance={50}
/>

<Canvas 
  camera={{ position: [10, 10, 10], fov: 50 }}  // 초기 위치도 멀음
/>
```

**문제점**:
- `minDistance={5}`: 카메라가 중심에서 최소 5 유닛 떨어져야 함
- 방 크기가 10×8×3 정도일 때, 5 유닛은 방 밖에 있는 거리
- 방 안으로 들어갈 수 없음

## ✅ 해결 방법

### 1. 최소 거리 대폭 축소

```typescript
// 수정 후
<OrbitControls
  target={[0, 1, 0]}  // 타겟을 바닥에서 1m 위로 설정!
  minDistance={0.5}   // 최소 거리 0.5 유닛 (10배 감소!)
  maxDistance={50}
/>
```

**효과**:
- ✅ 카메라가 중심에서 0.5 유닛까지 접근 가능
- ✅ 방 안으로 완전히 들어갈 수 있음
- ✅ 가구 바로 옆에서 배치 가능
- ✅ 세밀한 조정 가능
- ✅ 타겟이 가구 높이(1m)에 맞춰져 배치 편리

### 2. 타겟 위치를 가구 높이로 설정

```typescript
// 수정 전
<OrbitControls
  // target 미설정 (기본값: [0, 0, 0] = 바닥)
/>

// 수정 후
<OrbitControls
  target={[0, 1, 0]}  // Y축 1m 높이 (가구 중심 높이)
/>
```

**효과**:
- ✅ 줌인 시 시선이 가구 높이에 맞춰짐
- ✅ 바닥이 아닌 가구를 중심으로 회전
- ✅ 가구 배치 작업이 훨씬 편리
- ✅ 자연스러운 시점

### 3. 초기 카메라 위치 조정

```typescript
// 수정 전
camera={{ position: [10, 10, 10], fov: 50 }}

// 수정 후
camera={{ position: [5, 5, 5], fov: 60 }}
```

**변경 사항**:
- **위치**: [10, 10, 10] → [5, 5, 5] (2배 가까워짐)
- **FOV**: 50° → 60° (시야각 확대)

**효과**:
- ✅ 처음부터 방에 더 가까운 시점
- ✅ 넓은 시야각으로 더 많이 보임
- ✅ 즉시 작업 시작 가능

## 📊 수정 전/후 비교

### 카메라 거리 비교

```
수정 전:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
                    👁️ (최대 확대)
                    ↓ 5 유닛
        ┌─────────────────┐
        │                 │
        │      방 안      │  ← 들어갈 수 없음!
        │                 │
        └─────────────────┘
        ⊙ (타겟: 바닥)

수정 후:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        ┌─────────────────┐
        │       👁️        │  ← 방 안으로 들어감!
        │    (최대 확대)   │  ← 가구 높이에 맞춤!
        │       ⊙         │  ← 타겟: 1m 높이
        └─────────────────┘
        ↑ 0.5 유닛
```

### 줌 레벨 비교

| 상황 | 수정 전 | 수정 후 |
|------|---------|---------|
| 최대 확대 | 5 유닛 (방 밖) | 0.5 유닛 (방 안) |
| 최대 축소 | 50 유닛 | 50 유닛 (동일) |
| 줌 범위 | 5~50 (10배) | 0.5~50 (100배) |
| 초기 위치 | [10,10,10] | [5,5,5] |
| 시야각 | 50° | 60° |

## 🎮 사용 방법

### 마우스 휠로 줌
```
휠 위로: 확대 (방 안으로 들어감)
휠 아래로: 축소 (방 밖으로 나감)
```

### 줌 레벨별 용도

#### 레벨 1: 극도 확대 (0.5~2 유닛)
- 🔍 **용도**: 세밀한 가구 배치
- 📍 **시점**: 가구 바로 옆
- ✨ **활용**: 정확한 위치 조정, 간격 확인

#### 레벨 2: 방 안 시점 (2~5 유닛)
- 🏠 **용도**: 일반적인 배치 작업
- 📍 **시점**: 방 안에서 전체 보기
- ✨ **활용**: 가구 배치, 레이아웃 조정

#### 레벨 3: 방 밖 시점 (5~15 유닛)
- 🌍 **용도**: 전체 구조 파악
- 📍 **시점**: 방 전체를 외부에서 보기
- ✨ **활용**: 전체 레이아웃 확인

#### 레벨 4: 조감도 (15~50 유닛)
- 🛸 **용도**: 큰 그림 보기
- 📍 **시점**: 멀리서 전체 보기
- ✨ **활용**: 스크린샷, 프레젠테이션

## 🧪 테스트 시나리오

### 시나리오 1: 방 안으로 들어가기
1. 에디터 열기
2. 마우스 휠 위로 스크롤 (확대)
3. ✅ 카메라가 방 안으로 들어감
4. ✅ 벽이 투명해서 내부가 잘 보임
5. ✅ 가구를 바로 옆에서 볼 수 있음

### 시나리오 2: 세밀한 가구 배치
1. 방 안으로 최대 확대
2. 가구 선택
3. 이동 모드로 가구 배치
4. ✅ 정확한 위치 조정 가능
5. ✅ 다른 가구와의 간격 확인 가능
6. ✅ 벽과의 거리 확인 가능

### 시나리오 3: 다양한 시점 전환
1. 최대 확대 (방 안)
2. 가구 세밀 배치
3. 중간 줌 (방 전체 보기)
4. 레이아웃 확인
5. 최대 축소 (조감도)
6. 전체 구조 확인
7. ✅ 모든 시점에서 작업 가능

### 시나리오 4: 벽면 가구 배치
1. 방 안으로 확대
2. 벽면 가까이 이동
3. 벽걸이 가구 선택 (TV, 액자 등)
4. 벽면에 배치
5. ✅ 높이 조정 가능
6. ✅ 정확한 위치 확인 가능

## 🎯 타겟 위치의 중요성

### 왜 1m 높이인가?

```
바닥 타겟 (0, 0, 0):
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        ┌─────────────────┐
        │   🪑  📺  🛋️   │  ← 가구들
        │                 │
        │       ⊙         │  ← 타겟 (바닥)
        └─────────────────┘
        👁️ 줌인하면 바닥을 보게 됨 ❌

가구 높이 타겟 (0, 1, 0):
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        ┌─────────────────┐
        │   🪑⊙📺  🛋️   │  ← 타겟 (가구 중심)
        │                 │
        │                 │
        └─────────────────┘
        👁️ 줌인하면 가구를 보게 됨 ✅
```

**1m 높이의 이유**:
- 대부분의 가구 높이가 0.5~1.5m
- 테이블, 의자, 소파 등의 중심 높이
- 사람의 앉은 눈높이와 유사
- 가장 자연스러운 시점

### 타겟 위치별 비교

| 타겟 높이 | 장점 | 단점 | 용도 |
|----------|------|------|------|
| Y = 0 (바닥) | 바닥 재질 확인 용이 | 가구 배치 불편 | 바닥 디자인 |
| Y = 1 (가구) | 가구 배치 최적 | - | 일반 작업 ✅ |
| Y = 1.5 (눈높이) | 실제 시점과 유사 | 천장 가까움 | 프레젠테이션 |
| Y = 2.5 (천장) | 천장 확인 용이 | 가구 보기 어려움 | 천장 디자인 |

## 🔧 기술 세부사항

### OrbitControls 파라미터

```typescript
interface OrbitControlsProps {
  target: [number, number, number];  // 타겟 위치 [x, y, z]
  minDistance: number;      // 최소 거리 (0.5)
  maxDistance: number;      // 최대 거리 (50)
  maxPolarAngle: number;    // 최대 수직 각도 (π/2 = 90°)
  enableDamping: boolean;   // 부드러운 움직임 (true)
  dampingFactor: number;    // 감쇠 계수 (0.05)
}
```

### 카메라 설정

```typescript
interface CameraProps {
  position: [number, number, number];  // 초기 위치 [x, y, z]
  fov: number;                         // 시야각 (Field of View)
}
```

### 거리 계산

```typescript
// 카메라와 타겟(중심) 사이의 거리
distance = √(x² + y² + z²)

// 예시:
// position: [5, 5, 5]
// distance = √(25 + 25 + 25) = √75 ≈ 8.66 유닛

// position: [0.5, 0.5, 0.5]
// distance = √(0.25 + 0.25 + 0.25) = √0.75 ≈ 0.87 유닛
```

## 💡 추가 개선 사항

### 현재 구현
- ✅ 최소 거리: 0.5 유닛
- ✅ 최대 거리: 50 유닛
- ✅ 초기 위치: [5, 5, 5]
- ✅ 시야각: 60°
- ✅ 타겟 위치: [0, 1, 0] (바닥에서 1m 위)

### 향후 가능한 개선
1. **프리셋 시점**
   - 버튼 클릭으로 미리 정의된 시점으로 이동
   - 예: "방 안", "조감도", "정면", "측면"

2. **줌 레벨 표시**
   - UI에 현재 줌 레벨 표시
   - 슬라이더로 줌 조정

3. **자동 프레이밍**
   - 가구 선택 시 자동으로 해당 가구에 포커스
   - 적절한 거리로 자동 줌

4. **1인칭 시점 모드**
   - 방 안을 걸어다니는 듯한 시점
   - WASD 키로 이동

5. **VR 모드**
   - VR 헤드셋 지원
   - 실제 방 안에 있는 듯한 경험

## 📏 권장 사용 거리

### 작업 유형별 권장 거리

| 작업 유형 | 권장 거리 | 설명 |
|----------|----------|------|
| 세밀한 배치 | 0.5~2 유닛 | 가구 바로 옆, 정밀 작업 |
| 일반 배치 | 2~5 유닛 | 방 안에서 전체 보기 |
| 레이아웃 확인 | 5~10 유닛 | 방 전체 구조 파악 |
| 프레젠테이션 | 10~20 유닛 | 전체적인 모습 |
| 스크린샷 | 15~25 유닛 | 보기 좋은 각도 |

### 방 크기별 권장 초기 거리

| 방 크기 | 권장 초기 거리 | 설명 |
|---------|---------------|------|
| 소형 (5×5m) | [3, 3, 3] | 작은 방 |
| 중형 (10×8m) | [5, 5, 5] | 일반적인 방 (현재 설정) |
| 대형 (15×12m) | [8, 8, 8] | 큰 방 |
| 초대형 (20×15m) | [10, 10, 10] | 매우 큰 공간 |

## ✅ 수정 완료 체크리스트

- [x] minDistance 5 → 0.5로 변경 (10배 감소)
- [x] 초기 카메라 위치 [10,10,10] → [5,5,5]로 변경
- [x] FOV 50° → 60°로 확대
- [x] 타겟 위치 [0,0,0] → [0,1,0]으로 변경 (가구 높이)
- [x] 타입 에러 확인
- [x] 테스트 시나리오 작성
- [x] 문서 작성

## 🎯 결과

### 수정 전
- ❌ 최대 확대해도 방 밖에서만 작업
- ❌ 세밀한 배치 불가능
- ❌ 가구 간격 조정 어려움
- ❌ 사용자 불편

### 수정 후
- ✅ 방 안으로 완전히 들어갈 수 있음
- ✅ 가구 바로 옆에서 배치 가능
- ✅ 정밀한 위치 조정 가능
- ✅ 직관적인 작업 환경
- ✅ 다양한 시점 활용 가능
- ✅ 타겟이 가구 높이에 맞춰져 배치 편리

## 🚀 사용 팁

### 빠른 시점 전환
1. **확대**: 마우스 휠 위로 (여러 번)
2. **축소**: 마우스 휠 아래로 (여러 번)
3. **회전**: 마우스 좌클릭 드래그
4. **이동**: 마우스 우클릭 드래그

### 효율적인 작업 흐름
1. 축소 → 전체 레이아웃 계획
2. 확대 → 방 안으로 들어가기
3. 배치 → 가구 세밀하게 배치
4. 확인 → 중간 줌으로 전체 확인
5. 반복 → 필요시 1~4 반복

### 정밀 배치 팁
- 최대 확대 상태에서 작업
- 그리드 라인 참고
- 스냅 기능 활용 (자동 정렬)
- 여러 각도에서 확인

---

**수정 완료일**: 2025-11-21  
**상태**: ✅ 완료 및 테스트 준비됨  
**영향**: 사용자 경험 대폭 개선, 작업 효율성 향상
